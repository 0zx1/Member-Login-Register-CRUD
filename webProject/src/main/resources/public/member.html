<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Member</title>

	<!-- Bootstrap core CSS -->
	<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom fonts for this template -->
	<link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
		rel="stylesheet">
	<link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="vendor/devicons/css/devicons.min.css" rel="stylesheet">
	<link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="css/resume.min.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body id="page-top">




	<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
		<a class="navbar-brand js-scroll-trigger" href="#page-top">
			<span class="d-block d-lg-none"></span>
			<span class="d-none d-lg-block">
				<img class="img-fluid img-profile rounded-circle mx-auto mb-2" id='output'>
			</span>
		</a>







		<div class="collapse navbar-collapse">

			<div class="navbar-nav ">
				<dic class="nav-item">
					<button id="aa" style="border: 0;
				border-radius: 5px; height: 30px;
            width: 50px;">查詢</button><br><br>
					<button id="bb" style="border: 0;
					border-radius: 5px; height: 30px;
				width: 50px;">新增</button><br><br>
					<button id="cc" style="border: 0;
					border-radius: 5px; height: 30px;
				width: 50px;">刪除</button><br><br>
					<button id="dd" style="border: 0;
					border-radius: 5px; height: 30px;
				width: 50px;">修改</button><br><br>
					<button class="sendpic" style="border: 0;
					border-radius: 5px; height: 30px;
				width: 100px;background-color: cornflowerblue;">上傳圖片</button><br><br>
					<button id="logout" style="border: 0;
					border-radius: 5px; height: 30px;
				width: 50px;background-color: red;">登出</button>
				</dic>
			</div>
			<!-- <ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
				<li class="nav-item">
					<a class="nav-link js-scroll-trigger"></a>
				</li>
			</ul> -->
		</div>
	</nav>



	<section class="resume-section p-3 p-lg-5 d-flex flex-column" id="experience">
		<div>

		</div>

		<!-- <div class="my-auto">
			<ul class="list-inline list-social-icons mb-0">
				<li class="list-inline-item">
					<a href="#">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
				<li class="list-inline-item">
					<a href="#">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
				<li class="list-inline-item">
					<a href="#">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
				<li class="list-inline-item">
					<a href="#">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-github fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
			</ul> -->

		<br>

		<h2 class="mb-5">會員<span class="text-primary">中心</span></h2>

		<div class="resume-item d-flex flex-column flex-md-row mb-5">
			<div class="resume-content mr-auto">

				<div class="subheading mb-3">
					<input class="setpic" type='file' accept='image/*' onchange='openFile(event)'><br><br>

					<label for="lname">代碼:</label>
					<input type="text" id="member_id" name="member_id" value=""><br>
					<label for="lname">帳號:</label>
					<input type="text" id="user_name" name="user_name" value=""><br>
					<label for="lname">密碼:</label>
					<input type="text" id="password" name="password" value=""><br>
					<label for="lname">信箱:</label>
					<input type="text" id="email" name="email" value=""><br>
					<!-- <label for="lname">生日:</label>
					<input type="date" id="birthday" name="birthday" value=""><br> -->
					<label for="lname">電話:</label>
					<input type="text" id="tel" name="tel" value=""><br>
					<label for="lname">地址:</label>
					<input type="text" id="addr" name="addr" value=""><br>

				</div>



			</div>
			<div class="resume-content mr-auto" id="printout">

			</div>
		</div>



	</section>



	</div>









	<script>


		//登出
		$("#logout").click(function () {
			$.ajax({
				url: "session/logout",
				type: "post",
				success: function (data) {
					console.log("有成功")
					console.log(data)
					if (data == "true") {
						location.href = "/index.html"
					}
				},
				error: function (data) {
					console.log("失敗")

				}
			});
		})


		//測試圖片
		$('.sendpic').click(function () {
			var formData = new FormData();
			formData.append("file", $(".setpic")[0].files[0]);
			$.ajax({
				url: "pic/icon",
				type: "post",
				data: formData,
				processData: false, // 告訴jQuery不要處理發送的數據
				contentType: false, // 告訴jQuery不要設置Content-Type請求
				dataType: 'text',
				success: function (data) {
					console.log(data)
				},
				error: function (data) {

				}
			});
		})

		//預覽圖片
		var openFile = function (event) {
			var input = event.target;

			var reader = new FileReader();
			reader.onload = function () {
				var dataURL = reader.result;
				var output = document.getElementById('output');
				output.src = dataURL;
			};
			reader.readAsDataURL(input.files[0]);
		};




		//查詢
		$('#aa').click(function () {

			$.ajax({
				method: "POST",
				url: "member/r",
			})

				.done(function (msg) {
					console.log(msg);
					msg.forEach(element => {
						$('#printout').append(
							'<div>' + '代碼: ' + element['member_id'] + '</div>' +
							'<div>' + '帳號: ' + element['user_name'] + '</div>' +
							'<div>' + '密碼: ' + element['password'] + '</div>' +
							'<div>' + '信箱: ' + element['email'] + '</div>' +
							// '<div>' + '生日: ' + element['birthday'] + '</div>' +
							'<div>' + '電話: ' + element['tel'] + '</div>' +
							'<div>' + '地址: ' + element['addr'] + '</div><hr><br>')
					 });
				})


		})



		//新增
		$('#bb').click(function () {

			$.ajax({
				method: "POST",
				url: "member/c",
				// dataType: "JSON",
				contentType: 'application/json;charset=utf-8',

				data: JSON.stringify({
					user_name: $('input[name = "user_name"]').val(),
					password: $('input[name = "password"]').val(),
					email: $('input[name = "email"]').val(),
					birthday: $('input[name = "birthday"]').val(),
					tel: $('input[name = "tel"]').val(),
					addr: $('input[name = "addr"]').val(),
				}),



				error: function () {

					//資料傳送失敗後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("失敗");

				},

				//傳送成功則跳出成功訊息

				success: function () {

					//資料傳送成功後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("成功");

				}
			})
		})




		//刪除
		$('#cc').click(function () {

			$.ajax({
				method: "POST",
				url: "member/d",
				dataType: "JSON",
				contentType: 'application/json;charset=utf-8',
				data: JSON.stringify({
					member_id: $('input[name = "member_id"]').val(),
				}),

				error: function () {

					//資料傳送失敗後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("失敗");

				},

				//傳送成功則跳出成功訊息

				success: function () {

					//資料傳送成功後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("成功");

				}
			})
		})




		//修改
		$('#dd').click(function () {

			$.ajax({
				method: "POST",
				url: "member/u",
				dataType: "JSON",
				contentType: 'application/json;charset=utf-8',
				data: JSON.stringify({
					member_id: $('input[name = "member_id"]').val(),
					user_name: $('input[name = "user_name"]').val(),
					password: $('input[name = "password"]').val(),
					email: $('input[name = "email"]').val(),
					birthday: $('input[name = "birthday"]').val(),
					tel: $('input[name = "tel"]').val(),
					addr: $('input[name = "addr"]').val(),
				}),

				error: function () {

					//資料傳送失敗後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("失敗");

				},

				//傳送成功則跳出成功訊息

				success: function () {

					//資料傳送成功後就會執行這個function內的程式，可以在這裡寫入要執行的程式  
					alert("成功");

				}
			})
		})

	</script>





	<!-- Bootstrap core JavaScript -->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Plugin JavaScript -->
	<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

	<!-- Custom scripts for this template -->
	<script src="js/resume.min.js"></script>

</body>

</html>